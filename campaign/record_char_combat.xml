<?xml version="1.0" encoding="iso-8859-1"?>

<!-- Please see the LICENSE.md file included with this distribution for attribution and copyright information. -->

<root>
	<windowclass name="charsheet_combat" merge="join">
		<script file="campaign/scripts/char_combat.lua" />
		<sheetdata>
			<!-- Defenses - Saves -->
			<frame_char name="saveframe">
				<bounds>15,210,350,120</bounds>
			</frame_char>

			<number_charsavefort name="fortitude" source="saves.fortitude.total">
				<anchored to="saveframe" position="insidetopleft" offset="83,28" width="32" height="20" />
			</number_charsavefort>
			<label name="fortitude_label">
				<anchored to="saveframe" position="insidetopleft" offset="20,28" width="80" />
				<static textres="fortitude" />
			</label>
			<number_charsaveref name="reflex" source="saves.reflex.total">
				<anchored to="fortitude" position="belowleft" offset="0,8" width="32" height="20" />
			</number_charsaveref>
			<label name="reflex_label">
				<anchored to="fortitude_label" position="belowleft" offset="0,8" width="80" />
				<static textres="reflex" />
			</label>
			<number_charsavewill name="will" source="saves.will.total">
				<anchored to="reflex" position="belowleft" offset="0,8" width="32" height="20" />
			</number_charsavewill>
			<label name="will_label">
				<anchored to="reflex_label" position="belowleft" offset="0,8" width="80" />
				<static textres="will_long" />
			</label>
			<label_fieldtop name="savettotal_label">
				<anchored to="fortitude" />
				<static textres="char_label_combattotal" />
			</label_fieldtop>

			<number_charcombatmod name="fortitudebase" source="saves.fortitude.base">
				<anchored to="fortitude" offset="7,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="fortitudestat">
				<anchored to="fortitudebase" />
				<baseability>constitution</baseability>
				<fieldabilitymod>fortitudestatmod</fieldabilitymod>
				<source><name>saves.fortitude.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="fortitudestatmod" source="saves.fortitude.abilitymod">
				<anchored to="fortitudebase" offset="48,0" />
			</number_charcombatabilitymod>
			<cycler_charcombatability name="fortitudestat2">
				<anchored to="fortitudebase" position="aboveright" offset="-112,-20" />
				<baseability>-</baseability>
				<fieldabilitymod>fortitudestatmod2</fieldabilitymod>
				<source><name>saves.fortitude.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<default></default>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="fortitudestatmod2" source="saves.fortitude.abilitymod2">
				<anchored to="fortitudebase" offset="115,0" />
				<script>
					function onValueChanged()
						window.fortitudemisc.secondSave()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="fortitudemisc" source="saves.fortitude.misc">
				<anchored to="fortitudestatmod" />
				<invisible />
				<script>
					function secondSave()
						local nSecSave = window.fortitudemisc2.getValue() + window.fortitudestatmod2.getValue()
						setValue(nSecSave)
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="fortitudemisc2" source="saves.fortitude.misc2">
				<anchored to="fortitudestatmod2" />
				<script>
					function onValueChanged()
						window.fortitudemisc.secondSave()
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="reflexbase" source="saves.reflex.base">
				<anchored to="reflex" offset="7,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="reflexstat">
				<anchored to="reflexbase" />
				<baseability>dexterity</baseability>
				<fieldabilitymod>reflexstatmod</fieldabilitymod>
				<source><name>saves.reflex.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="reflexstatmod" source="saves.reflex.abilitymod">
				<anchored to="reflexbase" offset="48,0" />
			</number_charcombatabilitymod>
			<cycler_charcombatability name="reflexstat2">
				<anchored to="reflexbase" position="aboveright" offset="-112,-20" />
				<baseability>-</baseability>
				<fieldabilitymod>reflexstatmod2</fieldabilitymod>
				<source><name>saves.reflex.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<default></default>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="reflexstatmod2" source="saves.reflex.abilitymod2">
				<anchored to="reflexbase" offset="115,0" />
				<script>
					function onValueChanged()
						window.reflexmisc.secondSave()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="reflexmisc" source="saves.reflex.misc">
				<anchored to="reflexstatmod" />
				<invisible />
				<script>
					function secondSave()
						local nSecSave = window.reflexmisc2.getValue() + window.reflexstatmod2.getValue()
						setValue(nSecSave)
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="reflexmisc2" source="saves.reflex.misc2">
				<anchored to="reflexstatmod2" />
				<script>
					function onValueChanged()
						window.reflexmisc.secondSave()
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="willbase" source="saves.will.base">
				<anchored to="will" offset="7,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="willstat">
				<anchored to="willbase" />
				<baseability>wisdom</baseability>
				<fieldabilitymod>willstatmod</fieldabilitymod>
				<source><name>saves.will.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="willstatmod" source="saves.will.abilitymod">
				<anchored to="willbase" offset="48,0" />
			</number_charcombatabilitymod>
			<cycler_charcombatability name="willstat2">
				<anchored to="willbase" position="aboveright" offset="-112,-20" />
				<baseability>-</baseability>
				<fieldabilitymod>willstatmod2</fieldabilitymod>
				<source><name>saves.will.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<default></default>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="willstatmod2" source="saves.will.abilitymod2">
				<anchored to="willbase" offset="115,0" />
				<script>
					function onValueChanged()
						window.willmisc.secondSave()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="willmisc" source="saves.will.misc">
				<anchored to="willstatmod" />
				<invisible />
				<script>
					function secondSave()
						local nSecSave = window.willmisc2.getValue() + window.willstatmod2.getValue()
						setValue(nSecSave)
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="willmisc2" source="saves.will.misc2">
				<anchored to="willstatmod2" />
				<script>
					function onValueChanged()
						window.willmisc.secondSave()
					end
				</script>
			</number_charcombatmod>

			<label_fieldtop name="savebase_label">
				<anchored to="fortitudebase" />
				<static textres="char_label_combatsaveclass" />
			</label_fieldtop>
			<label_fieldtop name="savestatmod_label">
				<anchored to="fortitudestatmod">
					<left parent="fortitudestat" />
				</anchored>
				<static textres="char_label_combatability" />
			</label_fieldtop>
			<label_fieldtop name="savestatmod2_label">
				<anchored to="fortitudestatmod2">
					<left parent="fortitudestat2" />
				</anchored>
				<static textres="char_label_combatability2" />
			</label_fieldtop>
			<label_fieldtop name="savemisc_label">
				<anchored to="fortitudemisc" position="aboveright" offset="-92,1" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>
		</sheetdata>
	</windowclass>
</root>