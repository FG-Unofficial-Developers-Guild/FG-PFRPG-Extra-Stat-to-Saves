<?xml version="1.0" encoding="iso-8859-1"?>

<!-- Please see the LICENSE.md file included with this distribution for attribution and copyright information. -->

<root>
	<windowclass name="charsheet_combat" merge="join">
		<sheetdata>
			<number_charsavefort name="fortitude" source="saves.fortitude.total">
				<anchored offset="83,28"/>
			</number_charsavefort>
			<label name="fortitude_label">
				<anchored offset="20,28"/>
			</label>

			<number_charcombatmod name="fortitudebase" source="saves.fortitude.base">
				<anchored to="fortitude" offset="7,0" />
			</number_charcombatmod>
			<cycler_ability name="fortitudestat2">
				<anchored to="fortitudebase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<baseability>-</baseability>
				<fieldabilitymod>fortitudestatmod2</fieldabilitymod>
				<source><name>saves.fortitude.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="fortitudestatmod2" source="saves.fortitude.abilitymod2">
				<anchored to="fortitudebase" offset="115,0" />
				<script>
					function onValueChanged()
						window.fortitudemisc.onValueChanged()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="fortitudemisc" source="saves.fortitude.misc">
				<anchored to="fortitudestatmod" />
				<invisible />
				<script>
					function onValueChanged()
						setValue(window.fortitudemisc2.getValue() + window.fortitudestatmod2.getValue())
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="fortitudemisc2" source="saves.fortitude.misc2">
				<anchored to="fortitudestatmod2" />
				<script>
					function onValueChanged()
						window.fortitudemisc.onValueChanged()
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="reflexbase" source="saves.reflex.base">
				<anchored to="reflex" offset="7,0" />
			</number_charcombatmod>
			<cycler_ability name="reflexstat2">
				<anchored to="reflexbase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<baseability>-</baseability>
				<fieldabilitymod>reflexstatmod2</fieldabilitymod>
				<source><name>saves.reflex.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="reflexstatmod2" source="saves.reflex.abilitymod2">
				<anchored to="reflexbase" offset="115,0" />
				<script>
					function onValueChanged()
						window.reflexmisc.onValueChanged()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="reflexmisc" source="saves.reflex.misc">
				<anchored to="reflexstatmod" />
				<invisible />
				<script>
					function onValueChanged()
						setValue(window.reflexmisc2.getValue() + window.reflexstatmod2.getValue())
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="reflexmisc2" source="saves.reflex.misc2">
				<anchored to="reflexstatmod2" />
				<script>
					function onValueChanged()
						window.reflexmisc.onValueChanged()
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="willbase" source="saves.will.base">
				<anchored to="will" offset="7,0" />
			</number_charcombatmod>
			<cycler_ability name="willstat2">
				<anchored to="willbase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<baseability>-</baseability>
				<fieldabilitymod>willstatmod2</fieldabilitymod>
				<source><name>saves.will.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="willstatmod2" source="saves.will.abilitymod2">
				<anchored to="willbase" offset="115,0" />
				<script>
					function onValueChanged()
						window.willmisc.onValueChanged()
					end
				</script>
			</number_charcombatabilitymod>
			<number_charcombatmod name="willmisc" source="saves.will.misc">
				<anchored to="willstatmod" />
				<invisible />
				<script>
					function onValueChanged()
						setValue(window.willmisc2.getValue() + window.willstatmod2.getValue())
					end
				</script>
			</number_charcombatmod>
			<number_charcombatmod name="willmisc2" source="saves.will.misc2">
				<anchored to="willstatmod2" />
				<script>
					function onValueChanged()
						window.willmisc.onValueChanged()
					end
				</script>
			</number_charcombatmod>

			<label_fieldtop name="savestatmod2_label">
				<anchored to="fortitudestatmod2">
					<left parent="fortitudestat2" />
				</anchored>
				<static textres="char_label_combatability2" />
			</label_fieldtop>
			<label_fieldtop name="savemisc_label">
				<anchored to="fortitudemisc" position="aboveright" offset="-92,1" />
			</label_fieldtop>
		</sheetdata>
	</windowclass>
</root>